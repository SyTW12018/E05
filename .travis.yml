dist: trusty
sudo: false
language: node_js
node_js:
- '10'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
    sonarcloud:
      organization: "sytw12018" # the key of the org you chose at step #3
      token:
        secure: "cmDMqplK2rT6XE6HLGRjDLgoqz8hfB0HWSm8ap5dV54r3B0rPjYtSGT8DYhKvXGB/mpXf6aWwmGCOLN903WX8Tjbcq+Xn0zYcyWBZWjq7d74jcaUVgI7Jdd5GBk5td9ENPM8Ihnj6enOo0XTZgjHq46Mm54XOuSCDS03pcrDUXVwIXxQ2rwXh4AQ0TWDS8mkhvN77yYYPCRcsujjBgBfnvejYkDw1+kjh8kPjgfvqa19wYwP1RSl5RbJzGdhDQlu0OW1F6S8dUufXUiqca8LqXZ978ZgSrNSASrnu1uX7F2tp0bbdMx8YvKUuiqWwJEFTaxEbOr6aW4pZay8IDEqcZx9wRyUqS9Trh4Io7/S7C5laTJzLU/zByQlDobzUSC3vQ1p7cdyvpdQk7dSeXmWGyWALCh9UINs0Oe2+kFeozk9ezaCeOKrOn5tUuew8niZYEoAuJWKavKX/bCGCF3Mg/p4rL6ZtitekWBeVn/AOWxrdt+LRJOi0YNeqIoqbSTPUTyZ6hSH1EXiFTAwJDa7zQlmFnt+9+CnGj5v1Ln97hvu4E0qP3ab9yp8GCIBjkPe0DS9sedIdPhWv6A6pCKbgTaS/KU9syfI0pNn3BRSCM/u32ZwTsR5cFEYiDsivle38rrMtUGTW1K5hOSJ5ulfnfZH2Hu0ZFd0qOLqo3iI+nc=" # encrypted value of your token
script:
  # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar
cache:
  directories:
  - "./node_modules"
notifications:
  slack:
    secure: EaYFtY8WgyYFG0oPsmSYeECUvntr38r34C3/shAjP6OilVe1GpVXyB6d4Yi8v3tk3UwtmZU3QMiotv9TIbAFFLroZ8JzNqitSuP9j0A9bCQjqwPLKa9UylTTO+gC9gBwA0EgFjYzU4KziSwFQDwrPyT+MWjX/errwSkufnvAtKQkJWuqJyRr8YJc9DwIbqjpUNfRfHK24pWb11VV/gGPYmx93ulDGhUJgy7tcsLn889BYDRfXlq14BQBDo1ZC3TPNWmiG6DYd9J2t3WNF7ZSKs2skh0dw3i+VasKG1fFZIEm6Ob8a6i8vB09eEV4KAAOVVjgnfvPnR5J9PKGr420I1RryObXiMQUYtseX9I5IX0aJPfF2vHg8v39nrDEyAz0oyzBBo27WctPuL1/oDatYG4RIotXSa/Xc1+1ewru/dWDnD4KZAOYq0qdHtrw9olkAXbKiE0+uKQcYHE+iHKSlEkE9KJCTetgf9cvGTOW+D0QhZXP/qViUn4hfdW9LzHtSmGRnXbWyK1dAUYWS+rnEpFENBjMZzP3W72YsocAIU+llx5Y/wmVSRqov5axDYna7rPzva5LYY4VoIHwW39JKBxqeNgimqPw3fzdO++BY2hw2w9NQRrbbKzUXtY/w0euunfcguEloGzo9221WsRh+NsN7zCxva72Bcf13ZJ46Yk=
  on_success: always
env:
  global:
    secure: m61D+MEUzD3unsKktI9Uu/QLqwl0pnqevVKjdtbogfST/5stSHUEfOUf89OksfTHemLDJ0ElNUIkzHR734HUEbl7+zvOGb99Rxy0TXu2tCfiUr9lD/0QACpfSYVERxO1rGZs6kjWueo5vIaGJoH3o1vmOAKBE9Iefa41QHxhjot8lkVgnsP6ww4kOc2gPkH3RYj0tT58xvcmW6/rleXG3wY5GFW+2Xfc/zSTnGM0ajx4AzzfuvEnLmv9xAMFh0CTfUWiaeHR96KBE5L2SqblMhTjciaroeTiQKYu8RMC5bzOiB4a4Y+Bsy9vg9J7nIUhDA8a5F9LOSFJIZoKTMlah3yeXrrfIsbEVFHiSRxfNQ5jZQ+fzNTWXNrDBmwcLh0u2aWsiiZV+oRwyTt7xl5YNTwLO54qiZb0ldVsfQSUAKM5JoHdCHWAgzCrFhrvqnMYL0+Fm8SThpkc8T1D0GDXzzXqzGFmvLEv2czGMR2vgPBGt660gp9bJdOlooAsmiLXidnG5ZsvIONhEeKL/Ysh3mMX9pWt+TKC9huELXKb7riB15lkH3Zm+/E4UzyIq0TydI03HllI31/8/cP8RGbEOtZ+kYC1PmcHDzuVDeUzlnFZYodvmIqKzpBIThLl7DHYXoXHlMTmHWvsvBs0ruPuIr3nufIT2oH8T1lXGiWdyE4=git
before_script:
- sudo chown root /opt/google/chrome/chrome-sandbox
- sudo chmod 4755 /opt/google/chrome/chrome-sandbox
- npm install -g sonarqube-scanner

script:
- ng test --watch=false --browsers ChromeHeadless
- npm run build
- sonar-scanner


  